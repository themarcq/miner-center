{% load static %}

<html>
    <head>
        <link href="{% static 'css/bootstrap.min.css' %}" rel="stylesheet" type="text/css"/>
    </head>
    <body>
        <script type="text/javascript" src="{% static 'js/jquery.min.js' %}"></script>
        <script type="text/javascript" src="{% static 'js/bootstrap.min.js' %}"></script>
        <script type="text/javascript" src="{% static 'js/Chart.bundle.min.js' %}"></script>
        <div class="container">
            {% for farm in farms %}
            <div class="col-md-12">
                <h1>{{ farm.label }}</h1>
                {% for worker in farm.workers.all %}
                <h3>{{ worker.label }}</h3>
                <p>{{ worker.description }}</h4>
                <div class="col-md-3"><b>Shares</b> {{ worker.newest_stat.shares }}</div>
                <div class="col-md-3"><b>Rejected Shares</b> {{ worker.newest_stat.rejected_shares }}</div>
                <div class="col-md-3"><b>Uptime</b> {{ worker.newest_stat.uptime }}</div>
                <div class="col-md-12">
                    <h5>Total hashrate</h5>
                    <canvas id="total-hashrate-{{ worker.pk }}" width="900" height="200"></canvas>
                    <script>
                    var ctx = $("#total-hashrate-{{ worker.pk }}")[0].getContext('2d');
                    var myChart = new Chart(ctx, {
                        type: 'line',
                        data: {
                            labels: ["Red", "Blue", "Yellow", "Green", "Purple", "Orange"],
                            datasets: [{
                                label: 'total hashrate',
                                data: {{ worker.last_week_total_hashrate_data }}
                            }]
                        },
                        options: {
                            scales: {
                                yAxes: [{
                                    ticks: {
                                        beginAtZero:true
                                    }
                                }]
                            }
                        }
                    });
                    </script>
                </div>
                <div class="col-md-12">
                    <h5>Temperatures</h5>
                </div>
                <div class="col-md-12">
                    <h5>Hashrates</h5>
                </div>
                <div class="col-md-12">
                    <h5>Fan speeds</h5>
                </div>
                <hr/>
                {% endfor %}
            </div>
            {% endfor %}
        </div>
    </body>
</html>
